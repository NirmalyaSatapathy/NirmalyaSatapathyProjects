<f:view>
  <h:form prependId="false">
    <h:outputLabel for="assetType" value="Select Asset Type:" />
    
    <h:selectOneMenu id="assetType" value="#{assetController.selectedType}" onchange="this.form.submit()">
      <f:selectItem itemLabel="-- Select Type --" itemValue="" />
      <f:selectItems value="#{assetController.typeList}" />
    </h:selectOneMenu>

    <!-- Table for all assets: rendered only if no type selected -->
    <h:dataTable value="#{assetController.showAssetsController()}" var="asset" styleClass="data-table"
                 rendered="#{empty assetController.selectedType}">
      <h:column>
        <f:facet name="header"><h:outputText value="Asset Name" /></f:facet>
        <h:outputText value="#{asset.assetName}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Asset Type" /></f:facet>
        <h:outputText value="#{asset.assetType}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Description" /></f:facet>
        <h:outputText value="#{asset.description}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Total Quantity" /></f:facet>
        <h:outputText value="#{asset.totalQuantity}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Available Quantity" /></f:facet>
        <h:outputText value="#{asset.availQuantity}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Created By" /></f:facet>
        <h:outputText value="#{asset.createdBy}" />
      </h:column>
    </h:dataTable>

    <!-- Table for filtered assets by selected type -->
    <h:dataTable value="#{assetController.searchAssetByTypeController(assetController.selectedType)}" var="asset" styleClass="data-table"
                 rendered="#{not empty assetController.selectedType}">
      <h:column>
        <f:facet name="header"><h:outputText value="Asset Name" /></f:facet>
        <h:outputText value="#{asset.assetName}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Asset Type" /></f:facet>
        <h:outputText value="#{asset.assetType}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Description" /></f:facet>
        <h:outputText value="#{asset.description}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Total Quantity" /></f:facet>
        <h:outputText value="#{asset.totalQuantity}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Available Quantity" /></f:facet>
        <h:outputText value="#{asset.availQuantity}" />
      </h:column>
      <h:column>
        <f:facet name="header"><h:outputText value="Created By" /></f:facet>
        <h:outputText value="#{asset.createdBy}" />
      </h:column>
    </h:dataTable>

  </h:form>
</f:view>
